---
- name: Add repository keys
  become: yes
  apt_key:
    id: A040830F7FAC5991
    url: https://dl-ssl.google.com/linux/linux_signing_key.pub

- name: Add repositories
  become: yes
  apt_repository:
    repo: deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
    filename: google-chrome

- name: Install CLI tools
  become: yes
  apt:
    update_cache: yes
    name:
      - adb
      - build-essential
      - gocr
      - htop
      - imagemagick
      - mkvtoolnix
      - nmap
      - tidy

- name: Install X tools
  become: yes
  apt:
    update_cache: yes
    name:
      - weston
      - xclip
      - xserver-xephyr
      - xwayland

- name: Install GUI tools
  become: yes
  apt:
    update_cache: yes
    name:
      - baobab
      - google-chrome-stable
      - gparted

- name: Install virtualization packages
  become: yes
  apt:
    update_cache: yes
    name:
      - virtualbox
      - qemu-kvm
  notify:
    - Assign KVM group

- name: Install snaps
  become: yes
  snap:
    classic: true
    name: pdftk

- name: Install flatpaks
  become: yes
  flatpak:
    name: "{{ item }}"
  with_items:
    - com.skype.Client
    - com.spotify.Client
    - org.gimp.GIMP
    - org.videolan.VLC

- name: Flush handlers
  meta: flush_handlers
